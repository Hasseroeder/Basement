<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="/media/misc_images/may.png">
    <title>Battles</title>
    <link href="/css/new_main.css" rel="stylesheet" type="text/css" media="all">
  </head>
  <body>
    <div class="center-pillar">
      <div id="navbar"></div>
      <div class="container">

        <p style="margin-top:2rem;">
          <span style="line-height: 1.5rem;">Quick preamble;</span><br>
          To learn the most about battles, always turn on battle logs! (<code class="discord-code"> owo battlesetting logs=link </code>). <br>
          I've learned 50% of what I know today, just from logs. <br>
          Other sources of learning include Helper bots, as some of them also have logs and can help you simulate & understand matchups better.<br>
          Otherwise, just talking with experienced players is a great recource, as the community is super helpful and always happy to explain mechanics. <br>
        </p>

        <h3 style="margin-bottom:-0.6rem;">OwO Battles</h3>
        <p>
          There are 2 types of battles: friendly battles <code class="discord-code"> owob @user </code> and random battles <code class="discord-code"> owob </code>. <br>
          When doing a friendly battle, the challenger will always go second, in random battles, however, they will always go first. 
        </p>
        <p>
          The way that owo does random-battle matchmaking is by generating a random ID and checking what team correlates to that ID. Which means that you mostly battle old and inactive teams, not the actively played ones. <br>
          When a user gets their team deleted, that ID is no longer available and gets rounded up when checked. This is super rare, but when it happens, another team would be twice as common to encounter in battles.
        </p>

        <h1 style="margin-bottom:-0.6rem;">the Battle System</h1>

        <p>
          Each battle is split into 24 turns. And each turn is split into a pre-phase, a main-phase and an end-phase.
        </p>
        <h4 style="margin-bottom:-0.6rem;">Pre-Phase</h4>
        <p style="margin-bottom:-0.6rem;">
          Firstly <i>canAttack</i> gets checked, which will determine whether your pets will be able to act this turn. <br>
          This returns false for dead pets and for pets with the <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/freeze.png"> freeze debuff applied. <br>
          <i>canAttack</i> getting determined this early in the turn, means that even if your pet is un-frozen or revived later in the turn, it still won't be able to act.
        </p>
        <p>
          Then, during the pre-phase only, pets holding a 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_shield.png">Shield or 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_banner.png">Banner might act.<br>
          If a pet is holding a 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_shield.png">Shield but has no active 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png">Taunt Buff, then the pet will use its shield, casting said buff.<br>
          For 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_banner.png">Banner the logic is slightly different, it will cast if it has no AttackUp Buff or if the AttackUp it has, were to expire after this turn. <br>
        </p>
        <h4 style="margin-bottom:-0.6rem;">Main-Phase</h4>
        <p style="margin-bottom:-0.6rem;"> 
          This is where the real magic happens! Damage is dealt, health is healed, and more!<img class="battles-page-emotes" src="/media/misc_images/woah.png">
        </p>
        <p>
          During the main phase, all pets act in alternating turns: First your pet in position 1, then the enemy pet in position 1, then your pet in position 2, etc. - if a pet is dead or its <i>canAttack</i> is false, its turn is skipped, but the order will stay the same, i.e., two pets of one team might act after one another.<br>
          Position is incredibly important because of this ordering. 
        </p>

        <h4 style="margin-bottom:-0.85rem;">End-Phase</h4>
        <p style="margin-bottom:-0.6rem; font-size:0.7rem;">
          <i>For the purposes of this, Buffs and Debuffs are both considered Buffs.</i>
        </p>
        <p style="margin-bottom:0.4rem;">  
          During the end phase, post-turn buffs will trigger: 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/poison.png"> Poison, 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/flame.png"> Flame, 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/celeb.png"> Celebration.<br>
        </p>
        <ul>
          <li>
            Their effects are executed in reverse order of reception, which also reduces their duration by 1.
          </li>
          <li>
            But as these don't proc on dead pets, their duration is never reduced on them. →Dead pets keep these buffs indefinitely.
          </li>
        </ul>
        <p style="margin-bottom:-0.6rem;"">
          the other Buffs also lose duration: 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/mort.png">
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/leech.png">
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/stinky.png">
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png">
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup++.png">
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/defup.png">
          (but 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/freeze.png">
          duration is reduced elsewhere) <br>
          Buffs also have a "just created" tag on creation, this tag is removed now.
          Only now, after all buffs went through their thing, a "clean up" is performed, and any that are at 0 duration (ie. marked for removal) are removed.
          
        </p>
        <p>  
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_hgen.png">Hgen and 
          <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_wgen.png">Wgen 
          afterwards also trigger, and heal/replenish their pets. <br>
          I.e. when a <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/mort.png"> Mortality Debuff ends in, say, turn 10, then Hgen will work again at full power in that turn.
        </p>

        <h1 style="margin-bottom:-0.6rem;">Notes on reading logs</h1>
        <p style="margin-bottom:-0.6rem;">
          Only after the Turn has ended, does the Battle Snapshot you see in the Logs get made.
        </p>
        <p >
          Example:
          You'd think my Tank didn't have <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png"> this turn, but that's incorrect.<br>
          It had <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png"> throughout the whole turn, but only after the turn has ended, does OwO show the Battle Snapshot.
        </p>
      
        <h1 style="margin-bottom:-0.6rem;">Damage Calculation</h1>
        <p>
          After a pet uses a weapon, it goes through three main steps to calculate the total damage: caluclating the base damage, adding random variance, and going through various modifiers. All three of these steps are done for every Attack, Heal, or Replenish, but for simplicity they will only be refered to as Attacks or Damage in this section.
        </p>

        <p>Each step will be followed by the example math for a level 50 <img class="battles-page-emotes" src="/media/owo_images/pets/eagle.gif"> Eagle holding a <img class="battles-page-emotes" src="/media/owo_images/tiers/fabled.png"> <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_bow.png"></p>
        
        <h3 style="margin-bottom:-0.6rem;">Base Damage</h4>
        <p>
          The first step for any attack involves only two numbers: the <a href="/pets.html">pet's relevant stat</a> (usually <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/STR.png"> STR or <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/MAG.png"> MAG for attacking weapons), and the weapon's modifier (e.g. 160% or 1.6 for a <img class="battles-page-emotes" src="/media/owo_images/tiers/fabled.png"> <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_bow.png">). Since the passives <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_str.png"> Strength and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_mag.png"> Magic are calculated into the base <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/StrMag.png"> STR/MAG stat, these are also accounted for during this step.
        </p>
        <p>
          <code class="discord-code"> BaseDamage = STR * WeaponModifier <br></code>
          <code class="discord-code"> BaseDamage = (50*13+100) * 1.6 <br></code>
          <code class="discord-code"> BaseDamage = 1200 <br></code>
        </p>

        <h3 style="margin-bottom:-0.6rem;">Random Bonus</h4>
        <p>After base damage is calculated, a random ±50 damage is added. OwO will pick a random number from -50 to +50 and add it, then it will round to the nearest whole number.</p>
        <p>For simplicity, we will be assuming that OwO Picked the random number 0, so 1200 is still our total damage to this point.</p>

        <h3 style="margin-bottom:-0.6rem;">Modifiers</h4>
        <p style="margin-bottom:-0.6rem; font-size:0.7rem;">
          <i>This gets very into the weeds, be warned.</i>
        </p>
        <p>There are many modifiers that can add and subtract from the base damage. These factors are categorized into four distinct groups:</p>
        <ol>
          <li>Positive Modifiers (eg. <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup.png"> Attack Up)</li>
          <li>Negative Modifiers (eg. <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/defup.png"> Defense Up)</li>
          <li><img class="battles-page-emotes" src="/media/owo_images/battleEmojis/PR.png"> PR / <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/MR.png"> MR</li>
          <li>Redirect Modifiers (<img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_sg.png"> Safeguard, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/tether.png"> Tether, and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/leech.png"> Leech)</li>
        </ol>
        <p>These are done step by step, and any increase or decrease to damage is based on the total of the previous step.</p>

        <h4 style="margin-bottom:-0.6rem;">Positive Modifiers</h4>
        <p>
          Positive Modifiers include <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup+.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup++.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_crit.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_enrage.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_gslay.png">, and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_resonance.png">. Each of their buffs is based on the total of the Base Damage done.
        </p>

        <p>In our example, the damage will go through <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/attup.png">.</p>
        <p>
          <code class="discord-code"> AfterPosModifiers = BaseDamage + (BaseDamage * Modifier) <br></code>
          <code class="discord-code"> AfterPosModifiers = 1200 + (1200 * 0.25) <br></code>
          <code class="discord-code"> AfterPosModifiers = 1500 </code><br><br>
          Note that you can add as many <code class="discord-code"> (BaseDamage * Modifier) </code> terms as you need, adding them all onto the Base Damage.
        </p>

        <h4 style="margin-bottom:-0.6rem;">Negative Modifiers</h4>
        <p>
          Negative Modifiers include <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/defup.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/mort.png">, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_adapt.png">, and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_resonance.png">. Each of their buffs is based on the total of the previous step, after all positive modifiers.
        </p>

        <p>In our example, the damage will go through <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/taunt.png"> and 1 stack of <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_resonance.png">.</p>
        <p>
          <code class="discord-code"> AfterNegModifiers = AfterPosModifiers + (AfterPosModifiers * Modifier) <br></code>
          <code class="discord-code"> AfterNegModifiers = 1500 - (1500 * 0.5) - (1500 * 0.1) <br></code>
          <code class="discord-code"> AfterNegModifiers = 600 </code><br><br>
          Note that you can add as many <code class="discord-code"> (BaseDamage * Modifier) </code> terms as you need, subtracting them all from the Base Damage.
        </p>

        <h4 style="margin-bottom:-0.6rem;">Resistance</h4>
        <p>
          Resistance is the most basic of all of the steps, simply reducing damage from the previous step by the res % shown on <code class="discord-code"> owoteam </code>. It is important to note that res is rounded as shown, with no decimals after the %.
        </p>

        <p>In our example, the damage will go through 60% <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/PR.png"> PR.</p>
        <p>
          <code class="discord-code"> AfterRes = AfterNegModifiers * (1 - Resistance) <br></code>
          <code class="discord-code"> AfterRes = 600 * (1 - 0.6) <br></code>
          <code class="discord-code"> AfterRes = 240 </code><br><br>
        </p>

        <h4 style="margin-bottom:-0.6rem;">Redirect Modifier</h4>
        <p>
          Finally comes the most compilcated step, Redirect Modifiers. There are only three Redirect Modifiers, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_sg.png"> Safeguard, <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/tether.png"> Tether, and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/leech.png"> Leech, and they are added unlike any other step previously. They are based on the damage from the last step, but if there are more than one, they are <b>instead</b> based on the damage from the previous Redirect Modifier.
        </p>

        <p>In our example, the damage will go through <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/f_sg.png"> and <img class="battles-page-emotes" src="/media/owo_images/battleEmojis/tether.png">.</p>
        <p>
          <code class="discord-code"> FinalDamage = AfterRes * (1 - Modifier) <br></code>
          <code class="discord-code"> FinalDamage = 240 * (1 - 0.4) * (1 - 0.4)<br></code>
          <code class="discord-code"> FinalDamage = 86.4 </code><br><br>

          Note that you can add as many <code class="discord-code"> (1 - Modifier) </code> terms as you need, <b>multiplying</b> them with your current result.
        </p>
      </div>

      <div id="construction"></div>

    </div>

    <script type="module" src="/js/basement_js/init.js"></script>
  </body>
</html>